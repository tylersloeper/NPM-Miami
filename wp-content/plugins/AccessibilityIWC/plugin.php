<?php/*Plugin Name: Accessibility IWCPlugin URI: https://israelweb.org.il/Description: פלאגין נגישותVersion: 1.0Author URI: https://israelweb.org.il/*/include 'wpdb.php';add_action('wp_head','Accessibility');function Accessibility(){global  $wpdb;$table = $wpdb->prefix . 'acciwc';$sql = 'SELECT * from '. $table . '';$result = $wpdb->get_results($sql);$tre = explode('-', $result[3]->opa);$postb = ($tre[0] == 't') ? 'top' : 'bottom';$poslr = ($tre[1] == 'right') ? 'right' : 'left';$tre = explode('-', $result[3]->opa);$postbc = ($tre[0] == 't') ? 'top' : 'bottom';$poslrc = ($tre[1] == 'right') ? 'right' : 'left';//echo $postbc;if($result[0]->opa == 1){	$an = 'jQuery(".acdiv").animate({width: "toggle"});';}elseif($result[0]->opa == 2){	$an = 'jQuery(".acdiv").slideToggle("slow");';}echo '<link rel="stylesheet" type="text/css" href="'. plugin_dir_url(__FILE__). 'css/a11y.css'.'"><script src="'. plugin_dir_url(__FILE__). 'js/a11y.js'.'"></script><!--script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script--><script> jQuery(document).ready(function(){	jQuery(".acor").on("click", function(){        jQuery(".accordion").toggleClass("activessb");		'.$an.'		var back = jQuery(".accordion").hasClass("activessb");		console.log(back);        if (back == true) {			 var src = "'. plugin_dir_url(__FILE__). 'img/02.png";			 jQuery(".aswqaed").attr("src", src);		}else{			var src = "'. plugin_dir_url(__FILE__). 'img/01.png";			 jQuery(".aswqaed").attr("src", src);		}    });	jQuery(".contboo").css("background", "#'.$result[3]->opa.'");});</script><style>	*{padding:0;margin:0;}	';	if($postbc == 'bottom'){		$heg = '516';	}else{		$heg = '516';	}	echo '	.activessb{		position: fixed;		'.$postbc.':'.$heg.'px !important;		'.$poslrc.': 0px;	}	.negativewhite{		background-color:#fff; color:#000;	}	.acdiv{width:51px;display: none; position: fixed;'.$postbc.': 0;'.$poslrc.': 0;z-index:99999999999;border:0px solid #000;float:left;}  /* left/right || top/bottom  */.contiwc{width:100px; height:100%;  background:#444;}	.contboo{width:50px; height:auto;padding: 0 0 9px 0; background:#'.$result[4]->opa.'; text-align:center;}  /* background:#999; */		.contboo img{margin: 10px 0 0 0;width: 50%;height: 30px;}	.accordion{padding:0 !important;}		button.accordion{position: fixed;'.$postbc.': 0px;'.$poslrc.': 0px;} /* left/right || top/bottom  */	.acdiv ul{list-style-type:none; margin:0;}		.acdiv ul li{display:block;}			.acdiv ul li a{width:100%;font-size: 9px !important ;display:block; height: 65px;text-align:center; border:0px solid #000; background-color: #'.$result[2]->opa.';padding: 7px;margin: 0px 0 0 0;}  /* background-color */			.acdiv ul li a img{width:100%;}			.acdiv span{				background-color: #'.$result[2]->opa.';				text-align:center;				display: block;				width: 100%;			}			.acdiv p{				background-color: #'.$result[2]->opa.';				text-align:center;				display: block;				font-size: 8px;				margin:0;				width: 100%;			}</style><div class="acor"><button class="accordion"><div class="contboo"><img class="aswqaed" src="'. plugin_dir_url(__FILE__). 'img/nag.png" /></div></button></div>	<div class="acdiv">				<ul>			<li><a href="javascript:void(0)" id="grayclass"><img src="'. plugin_dir_url(__FILE__). 'img/2.png" /><br>Mono chrome</a></li>			<li><a href="javascript:void(0)" id="negativeclass"><img src="'. plugin_dir_url(__FILE__). 'img/3.png" /><br>Dark contrast</a></li>			<li><a href="javascript:void(0)" id="negativeclasswhite"><img src="'. plugin_dir_url(__FILE__). 'img/4.png" /><br>Bright contrast</a></li>			<li><a href="javascript:void(0)" id="plus"><img src="'. plugin_dir_url(__FILE__). 'img/5.png" /><br>A+</a></li>			<li><a href="javascript:void(0)" id="minus"><img src="'. plugin_dir_url(__FILE__). 'img/6.png" /><br>A-</a></li>			<li><a href="javascript:void(0)" id="underline"><img src="'. plugin_dir_url(__FILE__). 'img/7.png" /><br>Highlight links</a></li>			<li><a href="javascript:void(0)" id="reset"><img src="'. plugin_dir_url(__FILE__). 'img/8.png" /><br>Reset</a></li>		</ul>				<span>		<p>© Copyright 2018 All rights reserved</p>		</span>	</div>';}if ( is_admin() ){/* Call the html code */add_action('admin_menu', 'Accessibility_admin_menu');	function Accessibility_admin_menu() {		add_options_page('Accessibility', 'Accessibility', 'administrator',	'acciwc', 'Accessibility_html_page');	}}if(isset($_POST['sub'])){	$arra = array_values($_POST); 	global  $wpdb;	$table = $wpdb->prefix . 'acciwc';	for($i=2; $i<count($arra)-1; $i++){		$key = array_search($arra[$i], $_POST);		$sql = 'SELECT * from '. $table . ' WHERE name LIKE "'.$key.'"';		$result = $wpdb->get_results($sql);		if(empty($result[0])){			$sql = 'INSERT INTO '. $table . ' (name, opa) VALUES ("'.$key.'", "'.$arra[$i].'")';			$result = $wpdb->get_results($sql);		}else{			$sql = 'UPDATE '. $table . ' SET opa = "'.$arra[$i].'" WHERE name="'.$key.'"';			$result = $wpdb->get_results($sql);		}		$key = '';	}}function Accessibility_html_page() {global  $wpdb;$table = $wpdb->prefix . 'acciwc';$sql = 'SELECT * from '. $table . '';$result = $wpdb->get_results($sql);for($i=0; $i<count($result); $i++){	$arr[$result[$i]->name] = $result[$i]->opa;}$titlean = '';$titlela = '';$titleic = '';$titlesa = '';if($arr['anioptions'] == 1){	$titlean = 'כניסה מהצד בהתאם לצד שנבחר';}elseif($arr['anioptions'] == 2){	$titlean = 'כניסה מהחלק העליון או התחתון בהתאם לבחירת המיקום';}if($arr['legoptions'] == 'he'){	$titlela = 'עברית';}elseif($arr['legoptions'] == 'en'){	$titlela = 'אנגלית';}if($arr['optionspo'] == 'b-left'){	$titleic = 'פינה תחתונה שמאלית';}elseif($arr['optionspo'] == 'b-right'){	$titleic = 'פינה תחתונה ימנית';}elseif($arr['optionspo'] == 't-left'){	$titleic = 'פינה עליונה שמאלית';}elseif($arr['optionspo'] == 't-right'){	$titleic = 'פינה עליונה ימנית';}if($arr['optionspob'] == 'b-left'){	$titlesa = 'פינה תחתונה שמאלית';}elseif($arr['optionspob'] == 'b-right'){	$titlesa = 'פינה תחתונה ימנית';}elseif($arr['optionspob'] == 't-left'){	$titlesa = 'פינה עליונה שמאלית';}elseif($arr['optionspob'] == 't-right'){	$titlesa = 'פינה עליונה ימנית';}?><script src="<?php echo plugin_dir_url(__FILE__). 'js/main.js'; ?> "></script><div><h2>Accessibility Options</h2><form method="post" name="cleanup_options" action=""><?php wp_nonce_field('update-options'); ?> <table><tr>	<td><strong>בחר סוג כניסה</strong></td>	<td>	<select name="anioptions" style="width:185px">		<option style="font-weight: bold;" value="<?php echo $arr['anioptions']; ?>"><?php echo $titlean; ?></option>		<option value="1">כניסה מהצד בהתאם לצד שנבחר</option>		<option value="2">כניסה מהחלק העליון או התחתון בהתאם לבחירת המיקום</option>	</select>	</td></tr><tr>	<td><strong>בחר שפה</strong></td>	<td>	<select name="legoptions" style="width:185px">		<option style="font-weight: bold;" value="<?php echo $arr['legoptions']; ?>"><?php echo $titlela; ?></option>		<option value="he">עברית</option>		<option value="en">אנגלית</option>	</select>	 (בחר שפה)</td></tr><tr>	<td><strong>בחר צבע רקע סרגל</strong></td>	<td><input class="jscolor" name="pocolor" value="<?php echo $arr['pocolor']; ?>"> (בחר צבע רקע סרגל)</td></tr><tr>	<td><strong>בחר צבע רקע אייקון</strong></td>	<td><input class="jscolor" name="vocolor" value="<?php echo $arr['vocolor']; ?>"> (בחר צבע רקע אייקון)</td></tr><!--tr>	<td><strong>בחר מיקום אייקון</strong></td>	<td>	<select style="width:185px" name="optionspo">	<option style="font-weight: bold;" value="<?php echo $result[4]->opa; ?>"><?php echo $titleic; ?></option>		<option value="b-left">פינה תחתונה שמאלית</option>		<option value="b-right">פינה תחתונה ימנית</option>		<option value="t-left">פינה עליונה שמאלית</option>		<option value="t-right">פינה עליונה ימנית</option>	</select>	(בחר מיקום אייקון)</td></tr--><tr>	<td><strong>בחר מיקום הסרגל</strong></td>	<td>	<select style="width:185px" name="optionspob">	<option style="font-weight: bold;" value="<?php echo $arr['optionspob']; ?>"><?php echo $titlesa; ?></option>		<option value="b-left">פינה תחתונה שמאלית</option>		<option value="b-right">פינה תחתונה ימנית</option>		<option value="t-left">פינה עליונה שמאלית</option>		<option value="t-right">פינה עליונה ימנית</option>	</select>	(בחר מיקום הסרגל)</td></tr></table><p><input type="submit" name="sub" value="<?php _e('Save Changes') ?>" /></p></form></div><?php}?>